<template>
    <!-- Tab Set Mode Display -->
    <template if:true={isTabset}>
        <lightning-tabset   role="navigation"   class={wrapperClass}
                            variant="standard"  title="Navigation"
                            active-tab-value={currentTab} >
            <template for:each={menuItems} for:item="item">
                <lightning-tab  key={item.id}       value={item.label}
                                label={item.label}  class="sfpegHideTab"
                                onactive={handleTabActive}>
                    <!--<p class="sfpegHideTab"></p>-->
                </lightning-tab>
            </template>
        </lightning-tabset>
    </template>

    <!-- Horizontal Link List Display -->
    <template if:true={isHList}>
        <nav role="navigation" class={wrapperClass} title="Navigation">
            <ul class="slds-list_horizontal slds-has-dividers_left slds-listbox slds-listbox_horizontal">
                <template for:each={menuItems} for:item="item">
                    <li key={item.label} class="slds-item">
                        <a href="#" data-value={item.label} tabindex="0" title={item.title} onclick={handleLinkClick}>{item.label}</a>
                    </li>
                </template>
            </ul>
        </nav>
    </template>

    <!-- Vertical Link List Display -->
    <template if:true={isVList}>
        <nav role="navigation" class={wrapperClass} title="Navigation">
            <ul class={listClass} >
                <template for:each={menuItems} for:item="item">
                    <li key={item.label}>
                        <template lwc:if={item.isLink}>
                            <a href="#" data-value={item.label} tabindex="0" title={item.title} onclick={handleLinkClick}>{item.label}</a>
                        </template>
                        <template lwc:else> 
                            {item.label} 
                        </template>                        
                        <!-- Submenu for MenuLabel items -->
                        <template if:true={item.hasChildren}>
                            <ul class={listClass}>
                                <template for:each={item.children} for:item="child">
                                    <li key={child.label}>
                                        <template lwc:if={child.isLink}>
                                            <a href="#" data-value={child.label} tabindex="0" title={child.title} onclick={handleLinkClick}>{child.label}</a>
                                        </template>
                                        <template lwc:else> 
                                            {child.label} 
                                        </template>
                                    </li>
                                </template>
                            </ul>
                        </template>
                    </li>
                </template>
            </ul>
        </nav>
    </template>

    <!-- Vertical Link List Display -->
    <template if:true={isOList}>
        <nav role="navigation" class={wrapperClass} title="Navigation">
            <ol class={listClass}>
                <template for:each={menuItems} for:item="item">
                    <li key={item.label}>
                        <template lwc:if={item.isLink}>
                            <a href="#" data-value={item.label} tabindex="0" title={item.title} onclick={handleLinkClick}>{item.label}</a>
                        </template>
                        <template lwc:else> 
                            {item.label} 
                        </template>
                        <!-- Submenu for MenuLabel items -->
                        <template if:true={item.hasChildren}>
                            <ul class={listClass}>
                                <template for:each={item.children} for:item="child">
                                    <li key={child.label}>
                                        <template lwc:if={child.isLink}>
                                            <a href="#" data-value={child.label} tabindex="0" title={child.title} onclick={handleLinkClick}>{child.label}</a>
                                        </template>
                                        <template lwc:else> 
                                            {child.label} 
                                        </template>
                                    </li>
                                </template>
                            </ul>
                        </template>
                    </li>
                </template>
            </ol>
        </nav>
    </template>

    <!-- Error Display -->
    <div if:true={errorMessage} class="slds-box slds-box_small slds-theme_default slds-media slds-media_center">
        <div class="slds-media__figure">
            <lightning-icon icon-name="utility:error"   size="x-small"    variant="error">
            </lightning-icon>
        </div>
        <div class="slds-media__body">
            <lightning-formatted-text   value={errorMessage}    class="slds-text-color_error">
            </lightning-formatted-text>
        </div>
    </div>
    
    <!-- Debug Information Display -->
    <template if:true={isDebug}>
        <div class="slds-box slds-box_small slds-theme_default slds-m-top_x-small"  >
            <dl class="slds-dl_horizontal">
                <dt class="slds-dl_horizontal__label slds-truncate">Configuration:</dt>
                <dd class="slds-dl_horizontal__detail">Menu: {navLabel} / Show Home? {showHome} / Mode: {displayMode} / Current Tab: {currentTab}</dd>
                <!--<dt class="slds-dl_horizontal__label slds-truncate">Menu Items:</dt>
                <dd class="slds-dl_horizontal__detail">{menuItemsString}</dd>-->
                <dt class="slds-dl_horizontal__label slds-truncate">Documentation:</dt>
                <dd class="slds-dl_horizontal__detail">
                    <lightning-formatted-url    value="https://github.com/pegros/PEG_LWR/blob/master/help/sfpegNavigationMenuCmp.md"
                                                label="See Help on GitHub"
                                                target="_blank">
                    </lightning-formatted-url>
                </dd>
            </dl>
        </div>
    </template>

    <!--
        <div class="navbar slds-border_bottom">
            <nav role="navigation" class="slds-align_absolute-center">
                <ul class="slds-list_horizontal slds-has-dividers_left slds-listbox slds-listbox_horizontal">
                   <template for:each={menuItems} for:item="item">
                       <li key={item.id} class="slds-item">
                           <c-navigation-menu-item item={item}></c-navigation-menu-item>
                       </li>
                   </template>
               </ul>
           </nav>
        </div>
    </template>
    -->
</template>